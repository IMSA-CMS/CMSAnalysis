#ifndef RESOLUTIONMODULE_HH
#define RESOLUTIONMODULE_HH

#include "AnalysisModule.hh"
#include <TGraphErrors.h>
#include <vector>

class MatchingModule;

class ResolutionModule : public AnalysisModule
{
public:
  ResolutionModule(const MatchingModule& matchingModule, int minMass = 300, int maxMass = 3200, int massInterval = 100);
  virtual bool process(const edm::EventBase& event) override;
  virtual void initialize() override;
  virtual void finalize() override;

private:
  const MatchingModule& matching;
  const int minMassCut;
  const int maxMassCut;
  const int interval;

  std::string pickMassBin(double invariantMass) const;
  const int getNumberOfBins() const;
  TGraphErrors* makeTGraphErrors(std::string name, int numberOfBins) const;

  std::pair<double, double> getErrorValues(TH1* histogram, std::string errorType);
};

#endif
